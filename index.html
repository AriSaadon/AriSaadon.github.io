<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Squares</title>
    <style>
        body {
            overflow: hidden;
            margin: 0;
            height: 100vh;
        }

        .square {
            position: absolute;
			
            left: 50%;
            transform: translate(-50%, 0);
			
            overflow: hidden; /* Ensure content overflows are hidden */
        }

        .content {
            position: absolute;
			
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            
			max-width: 1000px;
            width: 100%;
            height: 100%;	
			
			padding-left: 1%;
			padding-right: 1%;
        }

        .hidden {
            display: none;
        }

        .visible {
            display: block;
        }
    </style>
</head>

<body>
    <div id="squareA" class="square" data-square="squareA">
        <div class="content">
            <div data-tag="first">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></p>
            </div>
            <div data-tag="second" class="hidden">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></p>
            </div>
        </div>
    </div>
    <div id="squareB" class="square" data-square="squareB">
        <div class="content">
            <div data-tag="first">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></p>
            </div>
            <div data-tag="second" class="hidden">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></p>
            </div>
        </div>
    </div>
    <div id="squareC" class="square" data-square="squareC">
        <div class="content">
            <div data-tag="first">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></h1>
            </div>
            <div data-tag="second" class="hidden">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></h1>
            </div>
        </div>
    </div>
    <div id="squareD" class="square" data-square="squareD">
        <div class="content">
            <div data-tag="first">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></h1>
            </div>
            <div data-tag="second" class="hidden">
                <h1 data-i18n="title"></h1>
                <p data-i18n="text"></h1>
            </div>
        </div>
    </div>
    <script src="Square.js"></script>
    <script src="Language.js"></script>

    <script>
        let scrollProgress = 0.0;
        let targetProgress = 0.0;

        function animate() {
            let delta = targetProgress - scrollProgress;

            if (delta > 0.5) delta -= 1;
            if (delta < -0.5) delta += 1;

            scrollProgress += delta * 0.05;
            scrollProgress = (scrollProgress % 1 + 1) % 1;

            squares.forEach(square => square.adjust(scrollProgress));
            requestAnimationFrame(animate);
        }

        document.addEventListener('wheel', function (event) {
            targetProgress += event.deltaY * 0.00015;
            targetProgress = (targetProgress % 1 + 1) % 1;
        }, { passive: false });

        let touchStartY = 0;

        document.addEventListener('touchstart', function (event) {
            touchStartY = event.touches[0].clientY;
        }, { passive: false });

        document.addEventListener('touchmove', function (event) {
            const touchEndY = event.touches[0].clientY;
            const deltaY = touchStartY - touchEndY;
            targetProgress += deltaY * 0.00075;
            targetProgress = (targetProgress % 1 + 1) % 1;
            touchStartY = touchEndY;

            event.preventDefault();

        }, { passive: false });

        const squares = [
            new Square('squareA', 0.0, [
                { progress: 0.0, x: 0.5, y: 0.00, width: 1, height: 0.85, border: 0, backgroundColor: '#0000FF', visibleTag: 'first' },
                { progress: 0.2, x: 0.5, y: 0.01, width: 0.97, height: 0.1, border: 20, backgroundColor: '#FF0000', visibleTag: 'second' },
                { progress: 0.8, x: 0.5, y: 0.01, width: 0.97, height: 0.1, border: 20, backgroundColor: '#00FF00', visibleTag: 'second' },
                { progress: 1.0, x: 0.5, y: 0.00, width: 1, height: 0.85, border: 0, backgroundColor: '#0000FF', visibleTag: 'first' },
            ]),
            new Square('squareB', 0.2, [
                { progress: 0.0, x: 0.5, y: 0.85, width: 1, height: 0.05, border: 0, backgroundColor: '#FF0000', visibleTag: 'first' },
                { progress: 0.2, x: 0.5, y: 0.12, width: 1, height: 0.78, border: 0, backgroundColor: '#00FF00', visibleTag: 'second' },
                { progress: 0.4, x: 0.5, y: 0.12, width: 0.97, height: 0.1, border: 20, backgroundColor: '#0000FF', visibleTag: 'second' },
                { progress: 0.8, x: 0.5, y: 0.12, width: 0.97, height: 0.1, border: 20, backgroundColor: '#00FFFF', visibleTag: 'second' },
                { progress: 1.0, x: 0.5, y: 0.85, width: 1, height: 0.05, border: 0, backgroundColor: '#FF0000', visibleTag: 'first' },
            ]),
            new Square('squareC', 0.4, [
                { progress: 0.2, x: 0.5, y: 0.90, width: 1, height: 0.05, border: 0, backgroundColor: '#FFA500', visibleTag: 'first' },
                { progress: 0.4, x: 0.5, y: 0.23, width: 1, height: 0.72, border: 0, backgroundColor: '#00FF00', visibleTag: 'second' },
                { progress: 0.6, x: 0.5, y: 0.23, width: 0.97, height: 0.1, border: 20, backgroundColor: '#FF0000', visibleTag: 'second' },
                { progress: 0.8, x: 0.5, y: 0.23, width: 0.97, height: 0.1, border: 20, backgroundColor: '#00FFFF', visibleTag: 'second' },
                { progress: 1.0, x: 0.5, y: 0.90, width: 1, height: 0.05, border: 0, backgroundColor: '#FFA500', visibleTag: 'first' },
            ]),
            new Square('squareD', 0.6, [
                { progress: 0.4, x: 0.5, y: 0.95, width: 1, height: 0.05, border: 0, backgroundColor: '#008000', visibleTag: 'first' },
                { progress: 0.6, x: 0.5, y: 0.34, width: 1, height: 0.66, border: 0, backgroundColor: '#0000FF', visibleTag: 'second' },
                { progress: 0.8, x: 0.5, y: 0.34, width: 0.97, height: 0.1, border: 20, backgroundColor: '#FF0000', visibleTag: 'second' },
                { progress: 1.0, x: 0.5, y: 0.95, width: 1, height: 0.05, border: 0, backgroundColor: '#008000', visibleTag: 'first' },
            ])
        ];

        animate();

        updateContent('en');
    </script>
</body>

</html>
